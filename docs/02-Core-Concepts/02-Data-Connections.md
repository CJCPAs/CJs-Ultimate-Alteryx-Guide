# Data Connections

[Home](../../README.md) > [Core Concepts](./README.md) > Data Connections

---

## Overview

Alteryx can connect to virtually any data source. This guide covers the most common connection types and best practices.

---

## File-Based Connections

### Flat Files

#### CSV (Comma-Separated Values)
Most common data exchange format:
- Use **Input Data** tool
- Configure delimiter (comma, tab, pipe, etc.)
- Set first row as headers
- Handle encoding (UTF-8, ANSI, etc.)

**Configuration Tips:**
```
Field Length: Auto-detect or set manually
Start Data Import on Line: Skip header rows if needed
Quote Character: " for quoted fields
```

#### Excel Files
Read from `.xlsx`, `.xls`, `.xlsm`:
- Select specific sheet or named range
- Choose if first row contains headers
- Handle merged cells (usually problematic)

**Best Practices:**
- Avoid merged cells in source data
- Use named ranges for reliable selection
- Consider converting to CSV for large files

#### Text Files
Fixed-width or delimited:
- Configure column positions for fixed-width
- Set appropriate delimiters for delimited

### Structured Files

#### XML
Read XML documents:
- Use **XML Parse** tool
- Navigate element hierarchy
- Extract attributes and values

#### JSON
Read JSON data:
- Use **JSON Parse** tool
- Handle nested structures
- Flatten to tabular format

#### Parquet
Columnar storage format:
- Efficient for large datasets
- Preserves data types

---

## Database Connections

### Supported Databases

| Database | Connection Method |
|----------|-------------------|
| SQL Server | Native, ODBC, OleDB |
| Oracle | Native, ODBC |
| MySQL | ODBC |
| PostgreSQL | ODBC |
| Snowflake | Native, ODBC |
| Amazon Redshift | ODBC |
| Google BigQuery | Native |
| SQLite | Native |
| Access | Native, ODBC |

### Creating Database Connections

#### ODBC Connections
1. Set up ODBC Data Source in Windows
2. In Alteryx, use **Input Data** or **Connect In-DB**
3. Select ODBC connection
4. Enter credentials if needed

#### Native Connections
For supported databases:
1. Use **Input Data** tool
2. Select database type from dropdown
3. Enter server, database, credentials

### Connection Strings
Format varies by database:
```
SQL Server:
Driver={SQL Server};Server=myserver;Database=mydb;Trusted_Connection=Yes;

PostgreSQL:
Driver={PostgreSQL Unicode};Server=localhost;Port=5432;Database=mydb;Uid=user;Pwd=pass;

MySQL:
Driver={MySQL ODBC 8.0 Unicode Driver};Server=localhost;Database=mydb;User=user;Password=pass;
```

### Query Options

#### Table Selection
- Select specific tables
- Alteryx writes simple SELECT queries

#### Custom SQL
Write your own queries:
```sql
SELECT
    OrderID,
    CustomerName,
    OrderDate,
    TotalAmount
FROM Orders
WHERE OrderDate >= '2024-01-01'
ORDER BY OrderDate DESC
```

**Benefits of Custom SQL:**
- Filter at source (faster)
- Join tables in database
- Use database functions
- Reduce data transfer

---

## In-Database Processing

### What is In-DB?
Run processing inside the database rather than bringing all data into Alteryx.

### When to Use In-DB
- Very large datasets (millions of rows)
- Database server has more resources
- Data already in database
- Want to minimize data movement

### In-DB Tools
- **Connect In-DB**: Establish connection
- **Filter In-DB**: Filter data in database
- **Formula In-DB**: Add calculations
- **Join In-DB**: Join tables
- **Summarize In-DB**: Aggregate data
- **Output In-DB**: Write results

### In-DB Example
```
[Connect In-DB]───[Filter In-DB]───[Summarize In-DB]───[Data Stream Out]
     (DB)              (DB)              (DB)                (Local)
```

### In-DB Considerations
- Limited tool availability
- SQL generated by Alteryx
- Some functions not supported
- Test with small datasets first

---

## API Connections

### REST API with Download Tool
The Download tool calls REST APIs:

**Configuration:**
1. URL field or connection
2. HTTP method (GET, POST, PUT, DELETE)
3. Headers (authentication, content type)
4. Body content for POST/PUT

**Example: GET Request**
```
URL: https://api.example.com/data
Headers: Authorization=Bearer YOUR_TOKEN
```

**Example: POST Request**
```
URL: https://api.example.com/data
Method: POST
Headers: Content-Type=application/json
Body: {"name": "value"}
```

### Handling API Responses
- Response comes as text (usually JSON)
- Use **JSON Parse** to structure data
- Handle pagination for large datasets
- Implement retry logic for failures

### Authentication Types
| Type | Implementation |
|------|----------------|
| API Key | Header or URL parameter |
| Bearer Token | Authorization header |
| Basic Auth | Base64 encoded credentials |
| OAuth | Multi-step authentication |

---

## Cloud Connections

### Amazon S3
Connect to S3 buckets:
1. Configure credentials
2. Navigate bucket/folder
3. Read/write files

### Azure Blob Storage
Connect to Azure storage:
1. Set up connection string
2. Specify container
3. Access blobs

### Google Cloud Storage
Connect to GCS:
1. Authenticate with service account
2. Specify bucket
3. Read/write objects

### Snowflake
Native Snowflake support:
1. Account, warehouse, database
2. Schema and table
3. Query options

---

## Connection Best Practices

### Security

#### Never Hardcode Credentials
```
Bad:  Password in workflow
Good: Windows authentication or external credentials
```

#### Use Data Connection Manager (DCM)
- Centralized credential storage
- Encrypted passwords
- Shareable connections
- Audit trail

#### Least Privilege Access
- Request only needed permissions
- Use read-only accounts when possible
- Avoid using admin accounts

### Performance

#### Filter at Source
Push filters to database/API:
```
Good: WHERE clause in query
Bad:  Filter tool after full table read
```

#### Select Only Needed Columns
```sql
-- Good
SELECT Name, Amount FROM Orders

-- Bad
SELECT * FROM Orders
```

#### Limit Result Sets
During development:
```sql
SELECT TOP 1000 * FROM LargeTable
```

### Reliability

#### Handle Connection Failures
- Implement retry logic
- Log connection errors
- Alert on failures

#### Test Connections
- Verify connectivity before deployment
- Check permissions on target systems
- Test with expected data volumes

#### Document Connections
Track:
- Server/database names
- Required credentials
- Refresh schedules
- Data owner contacts

---

## Managing Connections

### Data Connection Manager (DCM)
Alteryx's credential management system:
1. **Options** > **Advanced Options** > **Data Connection Manager**
2. Create connection credentials
3. Reference in workflows

### Connection Aliases
Create reusable connection references:
- Define once, use everywhere
- Easy to update
- Environment switching (dev/prod)

### Exporting Workflows
When sharing workflows:
- Remove hardcoded credentials
- Use connection aliases
- Document required connections
- Provide setup instructions

---

## Troubleshooting Connections

### Common Issues

#### "Login failed"
- Verify credentials
- Check account permissions
- Confirm server name/port
- Test with database client first

#### "Driver not found"
- Install required ODBC driver
- Verify 32/64-bit match
- Check driver configuration

#### "Connection timeout"
- Check network connectivity
- Verify firewall rules
- Increase timeout setting
- Check server availability

#### "Permission denied"
- Verify user permissions
- Check table/view access
- Confirm execute permission for stored procedures

### Diagnostic Steps
1. Test connection outside Alteryx (SSMS, pgAdmin, etc.)
2. Check Windows Event Viewer
3. Review Alteryx log files
4. Test with simple query first

---

## Quick Reference

### Common Connection Types
| Source | Tool | Notes |
|--------|------|-------|
| CSV/TXT | Input Data | Configure delimiter |
| Excel | Input Data | Select sheet/range |
| SQL Server | Input Data, Connect In-DB | Native support |
| REST API | Download | GET/POST/PUT/DELETE |
| JSON | JSON Parse | After Download or Input |
| Salesforce | Salesforce Input | Native connector |
| S3 | Amazon S3 Upload/Download | AWS credentials needed |

### Input Data Configuration
```
File Type → Browse → Configure → Preview → Run
```

### Database Query Template
```sql
SELECT
    [columns]
FROM [table]
WHERE [conditions]
ORDER BY [column]
```

---

[← Workflow Design](01-Workflow-Design.md) | [Next: Expressions & Formulas →](03-Expressions-Formulas.md)
